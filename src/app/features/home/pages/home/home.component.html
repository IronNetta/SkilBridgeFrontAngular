<section class="home">

  @if (!isLoggedIn()) {
    <div class="hero">
      <h1>Trouvez le mentor id√©al</h1>
      <p>SkillBridge connecte les √©tudiants avec des experts pour apprendre plus vite.</p>
      <div class="cta">
        <button pButton label="Se connecter" class="p-button-rounded p-button-lg p-button-primary me-3" (click)="showLogin()"></button>
      </div>
    </div>

    <p-dialog header="Connexion / Inscription"
              [(visible)]="loginVisible" [style]="{width: '30rem', height: '30rem'}">
      <app-login-register-card (close)="closeLogin()"></app-login-register-card>
    </p-dialog>

    <div class="features">
      <p-card header="üéØ Apprentissage cibl√©">
        <p>Recherchez des mentors par comp√©tence et niveau.</p>
      </p-card>
      <p-card header="‚è∞ Disponibilit√©s flexibles">
        <p>R√©servez des sessions quand √ßa vous arrange.</p>
      </p-card>
      <p-card header="üåü Suivi & Feedback">
        <p>Laissez des avis, am√©liorez votre progression.</p>
      </p-card>
    </div>
  } @else {
    <div class="dashboard">
      <h2>üëã Bonjour {{ user()!.user.username }}</h2>

      @switch (dashboard()?.role) {
        @case ('STUDENT') {
          <p-card header="üìö Mes sessions">
            <p>Vous avez {{ dashboard()?.sessionsCount }} sessions pr√©vues.</p>
          </p-card>
          <p-card header="üí¨ Mes feedbacks">
            <p>{{ dashboard()?.feedbacks }} avis laiss√©s.</p>
          </p-card>
        }
        @case ('MENTOR') {
          <p-card header="üìÖ Sessions √† venir">
            <p>{{ dashboard()?.upcomingSessions }} pr√©vues.</p>
          </p-card>
          <p-card header="‚≠ê Moyenne">
            <p>{{ dashboard()?.averageRating }} / 5</p>
          </p-card>
        }
        @case ('ADMIN') {
          <p-card header="üë• Utilisateurs">
            <p>{{ dashboard()?.usersCount }} comptes actifs.</p>
          </p-card>
        }
      }
    </div>
  }

</section>
