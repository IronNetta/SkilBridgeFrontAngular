<section class="home">
  @if (!isLoggedIn()) {
  <div class="hero">
    <h1>Trouvez le mentor id√©al</h1>
    <p>
      SkillBridge connecte les √©tudiants avec des experts pour apprendre plus
      vite.
    </p>
    <div class="cta">
      <button
        pButton
        label="Se connecter"
        class="p-button-rounded p-button-lg p-button-primary me-3"
        (click)="showLogin()"
      ></button>
    </div>
  </div>

  <p-dialog
    header="Connexion / Inscription"
    [(visible)]="loginVisible"
    [style]="{ width: '30rem', height: '35rem' }"
  >
    <app-login-register-card (close)="closeLogin()"></app-login-register-card>
  </p-dialog>

  <div class="features">
    <p-card>
      <ng-template pTemplate="header">
        <img
          src="assets/img/target.png"
          alt="Apprentissage cibl√©"
          width="100"
        />
      </ng-template>
      <ng-template pTemplate="title"> üéØ Apprentissage cibl√© </ng-template>
      <p>Recherchez des mentors par comp√©tence et niveau.</p>
    </p-card>

    <p-card>
      <ng-template pTemplate="header">
        <img
          src="assets/img/calendar.png"
          alt="Disponibilit√©s flexibles"
          width="100"
        />
      </ng-template>
      <ng-template pTemplate="title"> ‚è∞ Disponibilit√©s flexibles </ng-template>
      <p>R√©servez des sessions quand √ßa vous arrange.</p>
    </p-card>

    <p-card>
      <ng-template pTemplate="header">
        <img src="assets/img/feedback.png" alt="Suivi & Feedback" width="100" />
      </ng-template>
      <ng-template pTemplate="title"> üåü Suivi & Feedback </ng-template>
      <p>Laissez des avis, am√©liorez votre progression.</p>
    </p-card>
  </div>
  } @else {
  <div class="dashboard">
    <h2>üëã Bonjour {{ user()!.user.username }}</h2>

    @switch (dashboard()?.role) { @case ('STUDENT') {
    <div class="dashboard-grid">
      <p-card header="üìö Mes sessions">
        <p>
          Vous avez r√©serv√©
          <strong>{{ dashboard()?.sessionsCount }}</strong> session(s).
        </p>
        <button
          pButton
          label="Voir mes sessions"
          icon="pi pi-calendar-plus"
          class="p-button-text p-button-sm"
        ></button>
      </p-card>

      <p-card header="üí¨ Feedbacks laiss√©s">
        <p>
          Vous avez partag√© <strong>{{ dashboard()?.feedbacks }}</strong> avis.
        </p>
        <button
          pButton
          label="Voir mes feedbacks"
          icon="pi pi-comments"
          class="p-button-text p-button-sm"
        ></button>
      </p-card>

      <p-card header="‚≠ê Mentors recommand√©s">
        <p>
          <strong>{{ dashboard()?.recommendedMentors }}</strong> mentor(s) vous
          sont sugg√©r√©s selon vos pr√©f√©rences.
        </p>
        <button
          pButton
          label="Explorer les mentors"
          icon="pi pi-users"
          class="p-button-sm p-button-primary"
        ></button>
      </p-card>
    </div>
    } @case ('MENTOR') {
    <div class="dashboard-grid">
      <p-card header="üìÖ Sessions √† venir">
        <p>
          Vous avez
          <strong>{{ dashboard()?.upcomingSessions }}</strong> session(s)
          pr√©vues.
        </p>
        <button
          pButton
          label="G√©rer mon planning"
          icon="pi pi-clock"
          class="p-button-text p-button-sm"
        ></button>
      </p-card>

      <p-card header="‚≠ê Ma note moyenne">
        <p>
          Votre note actuelle est de
          <strong>{{ dashboard()?.averageRating }}/5</strong>.
        </p>
        <p-rating
          [ngModel]="dashboard()?.averageRating"
          [readonly]="true"
        ></p-rating>
      </p-card>

      <p-card header="üîî Notifications">
        <p>
          Vous avez
          <strong>{{ dashboard()?.notifications }}</strong> nouvelle(s)
          notification(s).
        </p>
        <button
          pButton
          label="Voir mes notifications"
          icon="pi pi-bell"
          class="p-button-sm p-button-warning"
        ></button>
      </p-card>
    </div>
    } @case ('ADMIN') {
    <div class="dashboard-grid">
      <p-card header="üë• Utilisateurs" class="dashboard-card">
        <p>
          <strong>{{ dashboard()?.usersCount }}</strong> comptes actifs.
        </p>
        <button
          pButton
          icon="pi pi-users"
          label="G√©rer les utilisateurs"
          class="p-button-sm p-button-primary"
        ></button>
      </p-card>

      <p-card header="üßë‚Äçüè´ Nouveaux mentors" class="dashboard-card">
        <p>
          <strong>{{ dashboard()?.newMentors }}</strong> cette semaine.
        </p>
        <button
          pButton
          icon="pi pi-user-plus"
          label="Voir les demandes"
          class="p-button-sm p-button-success"
        ></button>
      </p-card>

      <p-card header="üìà Sessions cette semaine" class="dashboard-card">
        <p>
          <strong>{{ dashboard()?.weeklySessions }}</strong> sessions
          organis√©es.
        </p>
        <button
          pButton
          icon="pi pi-chart-line"
          label="Statistiques"
          class="p-button-sm p-button-info"
        ></button>
      </p-card>
    </div>
    } }
  </div>
  }
</section>
